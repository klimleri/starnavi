(this["webpackJsonpstar-navi"]=this["webpackJsonpstar-navi"]||[]).push([[0],{42:function(e,t,a){e.exports=a(56)},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(6),l=a.n(i),s=(a(47),a(48),a(30)),c=a(31),o=a(35),d=a(32),u=a(36),m=a(87),f=a(89),h=a(86);a(49),a(50);var v=function(e){return r.a.createElement("div",{className:"winners"},r.a.createElement("div",{className:"winners__title"},"Leader Board"),r.a.createElement("div",{className:"winners__block"},e.winners.map((function(e){return r.a.createElement("div",{className:"winners__item winner",key:e.id},r.a.createElement("div",{className:"winner__name"},e.winner),r.a.createElement("div",{className:"winner__time"},e.date))}))))},g=(a(51),function(){return r.a.createElement("div",{className:"loading"},r.a.createElement("div",{className:"lds-dual-ring"}))}),p=(a(52),function(e){var t=e.isBlue,a=e.isGreen,n=e.isRed,i=e.clickable,l={backgroundColor:t?"#42d8e8":a?"#00e871":n?"#e85a5f":"white",cursor:e.started&&i?"pointer":"default"};return r.a.createElement("div",{className:"square",style:l,onClick:e.handleClick,"data-id":e.id})}),w=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(d.a)(t).call(this,e))).handleChangeMode=function(e){var t=e.target.value;a.setState((function(e){return{mode:t,field:e.gameSettings[t].field,delay:e.gameSettings[t].delay}})),a.createField(a.state.gameSettings[t].field)},a.handleChangeName=function(e){a.setState({userName:e.target.value})},a.handleStart=function(){var e=a.state,t=e.field;if(e.ended){var n=a.createField(t);a.setState({arrayOfSquares:n,ended:!1})}a.setState({started:!0}),a.interval()},a.interval=function(){var e=setInterval((function(){var t=a.state,n=t.arrayOfSquares,r=t.field,i=t.userName,l=n.filter((function(e){return e.isBlue}));if(l.length&&(n[l[0].id].isBlue=!1,n[l[0].id].isRed=!0,n[l[0].id].clickable=!1),n.filter((function(e){return e.isGreen})).length===Math.round(Math.pow(r,2)/2))a.endGame(i),clearInterval(e);else if(n.filter((function(e){return e.isRed})).length===Math.round(Math.pow(r,2)/2))a.endGame("Computer AI"),clearInterval(e);else{var s=n.filter((function(e){return e.available}));if(s.length){var c=s[Math.floor(Math.random()*s.length)];n[c.id].isBlue=!0,n[c.id].available=!1,a.setState({availableSquares:s})}}}),a.state.delay)},a.endGame=function(e){a.setState({started:!1,ended:!0,winnerName:e}),a.postData()},a.handleClick=function(e){var t=a.state.arrayOfSquares,n=t[e.target.dataset.id];n.isBlue&&(t[n.id].isBlue=!1,t[n.id].isGreen=!0,t[n.id].clickable=!1,a.setState({arrayOfSquares:t}))},a.createField=function(e){for(var t=[],n=0;n<Math.pow(e,2);n++)t[n]={id:n,isBlue:null,isGreen:null,isRed:null,clickable:!0,available:!0};return a.setState({arrayOfSquares:t}),t},a.postData=function(){var e=new Date,t="".concat(e.toTimeString().slice(0,5),"; ").concat(e.getDate()," ").concat(e.toLocaleDateString("en-US",{month:"long"})," ").concat(e.getFullYear()),n={winner:a.state.winnerName,date:t};return fetch("https://starnavi-frontend-test-task.herokuapp.com/winners",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){a.setState({winners:e})})).catch((function(e){console.log(e)}))},a.state={gameSettings:null,mode:"",field:null,delay:null,winners:null,winnerName:null,userName:"",isLoad:!1,started:!1,ended:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://starnavi-frontend-test-task.herokuapp.com/game-settings").then((function(e){return e.json()})).then((function(t){e.setState({gameSettings:t,field:t[Object.keys(t)[0]].field}),fetch("https://starnavi-frontend-test-task.herokuapp.com/winners").then((function(e){return e.json()})).then((function(t){e.setState({isLoad:!0,winners:t})})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoad,n=t.gameSettings,i=t.mode,l=t.field,s=t.arrayOfSquares,c=t.winners,o=t.winnerName,d=t.userName,u=t.started,w=t.ended;return a?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"game"},r.a.createElement("div",{className:"game__settings"},r.a.createElement("div",{className:"game__mode"},r.a.createElement(m.a,{select:!0,label:"Pick game mode",className:"select",value:i,onChange:this.handleChangeMode},Object.keys(n).map((function(e,t){return r.a.createElement(f.a,{key:t,value:e},e)})))),r.a.createElement("div",{className:"game__user"},r.a.createElement(m.a,{label:"Enter your name",className:"input",value:d,onChange:this.handleChangeName})),r.a.createElement("div",{className:"game__play"},r.a.createElement(h.a,{variant:"contained",className:"play-button",disabled:!i||!d||u,onClick:this.handleStart},w?"Play Again":"Play"))),r.a.createElement("div",{className:"game__message"},w&&"".concat(o," won")),s&&r.a.createElement("div",{className:"game__field",style:{maxWidth:"".concat(50*l,"px")}},s.map((function(t){return r.a.createElement(p,Object.assign({key:t.id},t,{started:u,handleClick:e.handleClick}))})))),r.a.createElement(v,{winners:c})):r.a.createElement(g,null)}}]),t}(n.Component);var N=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(w,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[42,1,2]]]);
//# sourceMappingURL=main.ea6c5a82.chunk.js.map